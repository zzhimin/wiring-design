/**
 * @fileoverview 图形操作栏功能按钮
 */


const copy = {
  name: '复制',
  icon: '<svg t="1748595997032" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5173" width="20" height="20"><path d="M394.666667 106.666667h448a74.666667 74.666667 0 0 1 74.666666 74.666666v448a74.666667 74.666667 0 0 1-74.666666 74.666667H394.666667a74.666667 74.666667 0 0 1-74.666667-74.666667V181.333333a74.666667 74.666667 0 0 1 74.666667-74.666666z m0 64a10.666667 10.666667 0 0 0-10.666667 10.666666v448a10.666667 10.666667 0 0 0 10.666667 10.666667h448a10.666667 10.666667 0 0 0 10.666666-10.666667V181.333333a10.666667 10.666667 0 0 0-10.666666-10.666666H394.666667z m245.333333 597.333333a32 32 0 0 1 64 0v74.666667a74.666667 74.666667 0 0 1-74.666667 74.666666H181.333333a74.666667 74.666667 0 0 1-74.666666-74.666666V394.666667a74.666667 74.666667 0 0 1 74.666666-74.666667h74.666667a32 32 0 0 1 0 64h-74.666667a10.666667 10.666667 0 0 0-10.666666 10.666667v448a10.666667 10.666667 0 0 0 10.666666 10.666666h448a10.666667 10.666667 0 0 0 10.666667-10.666666v-74.666667z" fill="#000000" p-id="5174"></path></svg>',
  tooltip: '复制选中元素(ctrl + c)',
  action: (wd) => {
    const cells = wd.graph.getSelectedCells();
    if (cells && cells.length) {
      wd.graph.copy(cells);
    }
  },
  init: (graph) => {
    graph.bindKey('ctrl+c', () => {
      const htmlName = document.activeElement.tagName;
      if (htmlName === 'INPUT' || htmlName === "TEXTAREA") return;
      const cells = graph.getSelectedCells();
      if (cells && cells.length) {
        graph.copy(cells);
      }
      return false;
    });
  },
}

const paste = {
  name: '粘贴',
  icon: '<svg t="1748596026436" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6230" width="20" height="20"><path d="M170.666667 170.666667h455.111111v170.666666H170.666667V170.666667z m56.888889 113.777777h341.333333V227.555556H227.555556v56.888888z" fill="#333333" p-id="6231"></path><path d="M284.444444 56.888889h227.555556v170.666667H284.444444V56.888889z m56.888889 56.888889v56.888889h113.777778V113.777778H341.333333z" fill="#333333" p-id="6232"></path><path d="M113.777778 853.333333V227.555556h568.888889v199.111111h56.888889V170.666667H56.888889v739.555555h369.777778v-56.888889z" fill="#333333" p-id="6233"></path><path d="M967.111111 398.222222v398.222222l-170.666667 170.666667H398.222222V398.222222h568.888889z m-512 512h312.888889l142.222222-136.533333V455.111111H455.111111v455.111111z" fill="#333333" p-id="6234"></path><path d="M739.555556 739.555556h227.555555v-56.888889h-284.444444v284.444444h56.888889z" fill="#333333" p-id="6235"></path></svg>',
  tooltip: '粘贴选中元素(ctrl + v)',
  action: (wd) => {
    if (!wd.graph.isClipboardEmpty()) {
      const cells = wd.graph.paste({ offset: 32 });
      wd.graph.cleanSelection();
      wd.graph.select(cells);
    }
  },
  init: (graph) => {
    graph.bindKey('ctrl+v', () => {
      const htmlName = document.activeElement.tagName;
      // 在 input 上获取焦点的时候，不需要向下执行，否则 input 的粘贴功能会失效
      if (htmlName === 'INPUT' || htmlName === "TEXTAREA") return;
      if (!graph.isClipboardEmpty()) {
        const cells = graph.paste({ offset: 32 });
        graph.cleanSelection();
        graph.select(cells);
      }
      return false;
    });
  },
}

const undo = {
  name: '撤销',
  icon: '<svg t="1748597088653" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14449" width="20" height="20"><path d="M289.6384 256H614.4a307.2 307.2 0 1 1 0 614.4H204.8a51.2 51.2 0 0 1 0-102.4h409.6a204.8 204.8 0 1 0 0-409.6H286.0032l59.2384 59.2384A51.2 51.2 0 1 1 272.7936 489.984L128 345.2416a51.2 51.2 0 0 1 0-72.448L272.7936 128a51.2 51.2 0 0 1 72.448 72.3968L289.6384 256z" fill="#666666" p-id="14450"></path></svg>',
  tooltip: '撤销上一步操作(ctrl + z)',
  action: (wd) => {
    wd.graph.undo();
  },
  init: (graph) => {
    graph.bindKey('ctrl+z', () => {
      graph.undo();
    });
  },
}

const redo = {
  name: '重做',
  icon: '<svg t="1748597045151" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13437" width="20" height="20"><path d="M737.9968 256l-55.6032-55.6032A51.2 51.2 0 1 1 754.8416 128l144.7936 144.7936a51.2 51.2 0 0 1 0 72.448L754.8416 489.984a51.2 51.2 0 0 1-72.448-72.3968L741.632 358.4H409.6a204.8 204.8 0 1 0 0 409.6h409.6a51.2 51.2 0 0 1 0 102.4H409.6A307.2 307.2 0 1 1 409.6 256h328.3968z" fill="#666666" p-id="13438"></path></svg>',
  tooltip: '重做(ctrl + y)',
  action: (wd) => {
    wd.graph.redo();
  },
  init: (graph) => {
    graph.bindKey('ctrl+y', () => {
      graph.redo();
    });
  },
}

const del = {
  name: '删除',
  icon: '<svg t="1748596110644" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9172" width="20" height="20"><path d="M254.398526 804.702412l-0.030699-4.787026C254.367827 801.546535 254.380106 803.13573 254.398526 804.702412zM614.190939 259.036661c-22.116717 0-40.047088 17.910928-40.047088 40.047088l0.37146 502.160911c0 22.097274 17.930371 40.048111 40.047088 40.048111s40.048111-17.950837 40.048111-40.048111l-0.350994-502.160911C654.259516 276.948613 636.328122 259.036661 614.190939 259.036661zM893.234259 140.105968l-318.891887 0.148379-0.178055-41.407062c0-22.13616-17.933441-40.048111-40.067554-40.048111-7.294127 0-14.126742 1.958608-20.017916 5.364171-5.894244-3.405563-12.729929-5.364171-20.031219-5.364171-22.115694 0-40.047088 17.911952-40.047088 40.048111l0.188288 41.463344-230.115981 0.106424c-3.228531-0.839111-6.613628-1.287319-10.104125-1.287319-3.502777 0-6.89913 0.452301-10.136871 1.296529l-73.067132 0.033769c-22.115694 0-40.048111 17.950837-40.048111 40.047088 0 22.13616 17.931395 40.048111 40.048111 40.048111l43.176358-0.020466 0.292666 617.902982 0.059352 0 0 42.551118c0 44.233434 35.862789 80.095199 80.095199 80.095199l40.048111 0 0 0.302899 440.523085-0.25685 0-0.046049 40.048111 0c43.663452 0 79.146595-34.95 80.054267-78.395488l-0.329505-583.369468c0-22.135136-17.930371-40.047088-40.048111-40.047088-22.115694 0-40.047088 17.911952-40.047088 40.047088l0.287549 509.324054c-1.407046 60.314691-18.594497 71.367421-79.993892 71.367421l41.575908 1.022283-454.442096 0.26606 52.398394-1.288343c-62.715367 0-79.305207-11.522428-80.0645-75.308173l0.493234 76.611865-0.543376 0-0.313132-660.818397 236.82273-0.109494c1.173732 0.103354 2.360767 0.166799 3.561106 0.166799 1.215688 0 2.416026-0.063445 3.604084-0.169869l32.639375-0.01535c1.25355 0.118704 2.521426 0.185218 3.805676 0.185218 1.299599 0 2.582825-0.067538 3.851725-0.188288l354.913289-0.163729c22.115694 0 40.050158-17.911952 40.050158-40.047088C933.283394 158.01792 915.349953 140.105968 893.234259 140.105968zM774.928806 815.294654l0.036839 65.715701-0.459464 0L774.928806 815.294654zM413.953452 259.036661c-22.116717 0-40.048111 17.910928-40.048111 40.047088l0.37146 502.160911c0 22.097274 17.931395 40.048111 40.049135 40.048111 22.115694 0 40.047088-17.950837 40.047088-40.048111l-0.37146-502.160911C454.00054 276.948613 436.069145 259.036661 413.953452 259.036661z" fill="#272636" p-id="9173"></path></svg>',
  tooltip: '删除选中元素(delete)',
  action: (wd) => {
    const cells = wd.graph.getSelectedCells();
    if (cells && cells.length) {
      wd.graph.removeCells(cells);
    }
  },
  init: (graph) => {
    graph.bindKey('delete', () => {
      const cells = graph.getSelectedCells();
      if (cells && cells.length) {
        graph.removeCells(cells);
      }
      return false;
    });
  },
}

const zoomIn = {
  name: '放大',
  icon: '<svg t="1748597126202" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15472" width="25" height="25"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z" p-id="15473"></path><path d="M625.792 448H512v-112a32 32 0 0 0-64 0V448h-112a32 32 0 0 0 0 64H448v112a32 32 0 1 0 64 0V512h113.792a32 32 0 1 0 0-64z" p-id="15474"></path></svg>',
  tooltip: '放大(ctrl + =)',
  action: (wd) => {
    wd.graph.zoom(0.2);
  },
  init: (graph) => {
    graph.bindKey('ctrl+=', () => {
      graph.zoom(0.2);
    });
  },
}

const zoomOut = {
  name: '缩小',
  icon: '<svg t="1748597152529" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16491" width="25" height="25"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z" p-id="16492"></path><path d="M625.792 448H336a32 32 0 0 0 0 64h289.792a32 32 0 1 0 0-64z" p-id="16493"></path></svg>',
  tooltip: '缩小(ctrl + -)',
  action: (wd) => {
    wd.graph.zoom(-0.2);
  },
  init: (graph) => {
    graph.bindKey('ctrl+-', () => {
      graph.zoom(-0.2);
    });
  },
}

const fitView = {
  name: '适应视图',
  icon: '<svg t="1748596167697" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12473" width="20" height="20"><path d="M179.2 704c7.04 0 12.8 5.76 12.8 12.8V832h115.2c7.04 0 12.8 5.76 12.8 12.8v38.4a12.8 12.8 0 0 1-12.8 12.8H140.8a12.8 12.8 0 0 1-12.8-12.8v-166.4c0-7.04 5.76-12.8 12.8-12.8h38.4z m704 0c7.04 0 12.8 5.76 12.8 12.8v166.4a12.8 12.8 0 0 1-12.8 12.8h-166.4a12.8 12.8 0 0 1-12.8-12.8v-38.4c0-7.04 5.76-12.8 12.8-12.8H832v-115.2c0-7.04 5.76-12.8 12.8-12.8h38.4z m-256-256c7.04 0 12.8 5.76 12.8 12.8v102.4a12.8 12.8 0 0 1-12.8 12.8H396.8a12.8 12.8 0 0 1-12.8-12.8V460.8c0-7.04 5.76-12.8 12.8-12.8h230.4z m256-320c7.04 0 12.8 5.76 12.8 12.8v166.4a12.8 12.8 0 0 1-12.8 12.8h-38.4a12.8 12.8 0 0 1-12.8-12.8V192h-115.2a12.8 12.8 0 0 1-12.8-12.8v-38.4c0-7.04 5.76-12.8 12.8-12.8h166.4z m-576 0c7.04 0 12.8 5.76 12.8 12.8v38.4a12.8 12.8 0 0 1-12.8 12.8H192v115.2a12.8 12.8 0 0 1-12.8 12.8h-38.4a12.8 12.8 0 0 1-12.8-12.8V140.8c0-7.04 5.76-12.8 12.8-12.8h166.4z" p-id="12474"></path></svg>',
  tooltip: '适应视图(ctrl + 0)',
  action: (wd) => {
    wd.graph.fitView();
  },
  init: (graph) => {
    graph.bindKey('ctrl+0', () => {
      graph.fitView();
    });
  },
}

export default [
  copy,
  paste,
  undo,
  redo,
  del,
  zoomIn,
  zoomOut,
  fitView,
];